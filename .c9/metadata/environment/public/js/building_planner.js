{"filter":false,"title":"building_planner.js","tooltip":"/public/js/building_planner.js","undoManager":{"mark":4,"position":4,"stack":[[{"start":{"row":0,"column":0},"end":{"row":13,"column":0},"action":"insert","lines":["var currentMaterial = null;","","document.getElementById('materialWood').addEventListener('click', function() {","    currentMaterial = 'wood';","    // Set properties like color, pattern, etc. for wood","});","","document.getElementById('materialBrick').addEventListener('click', function() {","    currentMaterial = 'brick';","    // Set properties like color, pattern, etc. for brick","});","","// Modify the drawing logic to use the current material when drawing.",""],"id":1}],[{"start":{"row":12,"column":0},"end":{"row":13,"column":0},"action":"remove","lines":["// Modify the drawing logic to use the current material when drawing.",""],"id":2}],[{"start":{"row":0,"column":27},"end":{"row":1,"column":0},"action":"insert","lines":["",""],"id":3},{"start":{"row":1,"column":0},"end":{"row":2,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":14,"column":0},"end":{"row":57,"column":0},"action":"insert","lines":["// ... previous code ...","","var startPoint = null;","","canvas.on('mouse:down', function(options) {","    startPoint = canvas.getPointer(options.e);","    ","    if (currentTool === 'rectangle') {","        // We will finalize drawing the rectangle on mouse:up","    }","    else if (currentTool === 'line') {","        // We will finalize drawing the line on mouse:up","    }","});","","canvas.on('mouse:up', function(options) {","    var endPoint = canvas.getPointer(options.e);","    ","    if (currentTool === 'rectangle') {","        var rectWidth = endPoint.x - startPoint.x;","        var rectHeight = endPoint.y - startPoint.y;","","        var rect = new fabric.Rect({","            left: startPoint.x,","            top: startPoint.y,","            fill: 'transparent',  // You can modify this based on the material","            stroke: 'black',     // You can modify this based on the material","            strokeWidth: 2,","            width: rectWidth,","            height: rectHeight","        });","        canvas.add(rect);","    }","    else if (currentTool === 'line') {","        var line = new fabric.Line([startPoint.x, startPoint.y, endPoint.x, endPoint.y], {","            stroke: 'black',    // You can modify this based on the material","            strokeWidth: 2","        });","        canvas.add(line);","    }","","    startPoint = null; // Reset the start point","});",""],"id":5}],[{"start":{"row":29,"column":0},"end":{"row":56,"column":3},"action":"remove","lines":["canvas.on('mouse:up', function(options) {","    var endPoint = canvas.getPointer(options.e);","    ","    if (currentTool === 'rectangle') {","        var rectWidth = endPoint.x - startPoint.x;","        var rectHeight = endPoint.y - startPoint.y;","","        var rect = new fabric.Rect({","            left: startPoint.x,","            top: startPoint.y,","            fill: 'transparent',  // You can modify this based on the material","            stroke: 'black',     // You can modify this based on the material","            strokeWidth: 2,","            width: rectWidth,","            height: rectHeight","        });","        canvas.add(rect);","    }","    else if (currentTool === 'line') {","        var line = new fabric.Line([startPoint.x, startPoint.y, endPoint.x, endPoint.y], {","            stroke: 'black',    // You can modify this based on the material","            strokeWidth: 2","        });","        canvas.add(line);","    }","","    startPoint = null; // Reset the start point","});"],"id":6},{"start":{"row":29,"column":0},"end":{"row":67,"column":3},"action":"insert","lines":["canvas.on('mouse:up', function(options) {","    var endPoint = canvas.getPointer(options.e);","    ","    if (currentTool === 'rectangle') {","        // ... Rectangle drawing logic ...","    }","    else if (currentTool === 'line') {","        var line = new fabric.Line([startPoint.x, startPoint.y, endPoint.x, endPoint.y], {","            stroke: 'black',    // You can modify this based on the material","            strokeWidth: 2","        });","        canvas.add(line);","","        // Calculate line length in pixels","        var lineLengthPixels = Math.sqrt(Math.pow((endPoint.x - startPoint.x), 2) + Math.pow((endPoint.y - startPoint.y), 2));","        ","        // Convert to meters","        var lineLengthMeters = lineLengthPixels / 50;","","        // Create label text","        var labelText = `${currentMaterial} - ${lineLengthMeters.toFixed(2)}m`;","","        // Determine position for the label (placing it in the middle of the line for simplicity)","        var labelPosition = {","            x: (startPoint.x + endPoint.x) / 2,","            y: (startPoint.y + endPoint.y) / 2","        };","","        var text = new fabric.Text(labelText, {","            left: labelPosition.x,","            top: labelPosition.y,","            fontSize: 12,","            backgroundColor: 'white'","        });","        canvas.add(text);","    }","","    startPoint = null; // Reset the start point","});"]}]]},"ace":{"folds":[],"scrolltop":324,"scrollleft":0,"selection":{"start":{"row":67,"column":3},"end":{"row":67,"column":3},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1698140353310,"hash":"3a32c6688f2383d88f3832d5f438c65e23513d35"}